{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/trensik/dev/react-native-paper/src/components/Snackbar.tsx\";\nimport * as React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"./Button\";\nimport Surface from \"./Surface\";\nimport Text from \"./Typography/Text\";\nimport { withTheme } from \"../core/theming\";\nvar DURATION_SHORT = 4000;\nvar DURATION_MEDIUM = 7000;\nvar DURATION_LONG = 10000;\n\nvar Snackbar = function (_React$Component) {\n  _inherits(Snackbar, _React$Component);\n\n  function Snackbar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Snackbar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Snackbar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      opacity: new Animated.Value(0.0),\n      hidden: !_this.props.visible\n    };\n\n    _this.toggle = function () {\n      if (_this.props.visible) {\n        _this.show();\n      } else {\n        _this.hide();\n      }\n    };\n\n    _this.show = function () {\n      if (_this.hideTimeout) {\n        clearTimeout(_this.hideTimeout);\n      }\n\n      _this.setState({\n        hidden: false\n      });\n\n      var scale = _this.props.theme.animation.scale;\n      Animated.timing(_this.state.opacity, {\n        toValue: 1,\n        duration: 200 * scale,\n        useNativeDriver: true\n      }).start(function (_ref) {\n        var finished = _ref.finished;\n\n        if (finished) {\n          var duration = _this.props.duration;\n          var isInfinity = duration === Number.POSITIVE_INFINITY || duration === Number.NEGATIVE_INFINITY;\n\n          if (finished && !isInfinity) {\n            _this.hideTimeout = setTimeout(_this.props.onDismiss, duration);\n          }\n        }\n      });\n    };\n\n    _this.hide = function () {\n      if (_this.hideTimeout) {\n        clearTimeout(_this.hideTimeout);\n      }\n\n      var scale = _this.props.theme.animation.scale;\n      Animated.timing(_this.state.opacity, {\n        toValue: 0,\n        duration: 100 * scale,\n        useNativeDriver: true\n      }).start(function (_ref2) {\n        var finished = _ref2.finished;\n\n        if (finished) {\n          _this.setState({\n            hidden: true\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Snackbar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.visible) {\n        this.show();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.visible !== this.props.visible) {\n        this.toggle();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.hideTimeout) {\n        clearTimeout(this.hideTimeout);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          visible = _this$props.visible,\n          action = _this$props.action,\n          onDismiss = _this$props.onDismiss,\n          theme = _this$props.theme,\n          style = _this$props.style;\n      var colors = theme.colors,\n          roundness = theme.roundness;\n\n      if (this.state.hidden) {\n        return null;\n      }\n\n      return React.createElement(SafeAreaView, {\n        pointerEvents: \"box-none\",\n        style: styles.wrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        }\n      }, React.createElement(Surface, {\n        pointerEvents: \"box-none\",\n        accessibilityLiveRegion: \"polite\",\n        style: [styles.container, {\n          borderRadius: roundness,\n          opacity: this.state.opacity,\n          transform: [{\n            scale: visible ? this.state.opacity.interpolate({\n              inputRange: [0, 1],\n              outputRange: [0.9, 1]\n            }) : 1\n          }]\n        }, {\n          backgroundColor: colors.onSurface\n        }, style],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        }\n      }, React.createElement(Text, {\n        style: [styles.content, {\n          marginRight: action ? 0 : 16,\n          color: colors.surface\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        }\n      }, children), action ? React.createElement(Button, {\n        accessibilityLabel: action.accessibilityLabel,\n        onPress: function onPress() {\n          action.onPress();\n          onDismiss();\n        },\n        style: styles.button,\n        color: colors.accent,\n        compact: true,\n        mode: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        }\n      }, action.label) : null));\n    }\n  }]);\n\n  return Snackbar;\n}(React.Component);\n\nSnackbar.DURATION_SHORT = DURATION_SHORT;\nSnackbar.DURATION_MEDIUM = DURATION_MEDIUM;\nSnackbar.DURATION_LONG = DURATION_LONG;\nSnackbar.defaultProps = {\n  duration: DURATION_MEDIUM\n};\nvar styles = StyleSheet.create({\n  wrapper: {\n    position: 'absolute',\n    bottom: 0,\n    width: '100%'\n  },\n  container: {\n    elevation: 6,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    margin: 8,\n    borderRadius: 4\n  },\n  content: {\n    marginLeft: 16,\n    marginVertical: 14,\n    flexWrap: 'wrap',\n    flex: 1\n  },\n  button: {\n    marginHorizontal: 8,\n    marginVertical: 6\n  }\n});\nexport default withTheme(Snackbar);","map":{"version":3,"mappings":"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","names":["React","Button","Surface","Text","withTheme","DURATION_SHORT","DURATION_MEDIUM","DURATION_LONG","Snackbar","state","opacity","Animated","Value","hidden","_this","props","visible","toggle","show","hide","hideTimeout","clearTimeout","setState","scale","theme","animation","timing","toValue","duration","useNativeDriver","start","finished","isInfinity","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","setTimeout","onDismiss","prevProps","children","action","style","colors","roundness","SafeAreaView","pointerEvents","styles","wrapper","__source","fileName","lineNumber","accessibilityLiveRegion","container","borderRadius","transform","interpolate","inputRange","outputRange","backgroundColor","onSurface","content","marginRight","color","surface","accessibilityLabel","onPress","button","accent","compact","mode","label","Component","defaultProps","StyleSheet","create","position","bottom","width","elevation","flexDirection","justifyContent","alignItems","margin","marginLeft","marginVertical","flexWrap","flex","marginHorizontal"],"sources":["Snackbar.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  SafeAreaView,\n  StyleProp,\n  StyleSheet,\n  ViewStyle,\n} from 'react-native';\n\nimport Button from './Button';\nimport Surface from './Surface';\nimport Text from './Typography/Text';\nimport { withTheme } from '../core/theming';\nimport { Theme } from '../types';\n\ntype Props = {\n  /**\n   * Whether the Snackbar is currently visible.\n   */\n  visible: boolean;\n  /**\n   * Label and press callback for the action button. It should contain the following properties:\n   * - `label` - Label of the action button\n   * - `onPress` - Callback that is called when action button is pressed.\n   */\n  action?: {\n    label: string;\n    accessibilityLabel?: string;\n    onPress: () => void;\n  };\n  /**\n   * The duration for which the Snackbar is shown.\n   */\n  duration?: number;\n  /**\n   * Callback called when Snackbar is dismissed. The `visible` prop needs to be updated when this is called.\n   */\n  onDismiss: () => void;\n  /**\n   * Text content of the Snackbar.\n   */\n  children: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n  /**\n   * @optional\n   */\n  theme: Theme;\n};\n\ntype State = {\n  opacity: Animated.Value;\n  hidden: boolean;\n};\n\nconst DURATION_SHORT = 4000;\nconst DURATION_MEDIUM = 7000;\nconst DURATION_LONG = 10000;\n\n/**\n * Snackbars provide brief feedback about an operation through a message at the bottom of the screen.\n * Snackbar by default use onSurface color from theme\n * <div class=\"screenshots\">\n *   <img class=\"medium\" src=\"screenshots/snackbar.gif\" />\n * </div>\n *\n * ## Usage\n * ```js\n * import * as React from 'react';\n * import { View, StyleSheet } from 'react-native';\n * import { Button, Snackbar } from 'react-native-paper';\n *\n * export default class MyComponent extends React.Component {\n *   state = {\n *     visible: false,\n *   };\n *\n *   render() {\n *     const { visible } = this.state;\n *     return (\n *       <View style={styles.container}>\n *         <Button\n *           onPress={() => this.setState(state => ({ visible: !state.visible }))}\n *         >\n *           {this.state.visible ? 'Hide' : 'Show'}\n *         </Button>\n *         <Snackbar\n *           visible={this.state.visible}\n *           onDismiss={() => this.setState({ visible: false })}\n *           action={{\n *             label: 'Undo',\n *             onPress: () => {\n *               // Do something\n *             },\n *           }}\n *         >\n *           Hey there! I'm a Snackbar.\n *         </Snackbar>\n *       </View>\n *     );\n *   }\n * }\n *\n * const styles = StyleSheet.create({\n *   container: {\n *     flex: 1,\n *     justifyContent: 'space-between',\n *   },\n * });\n * ```\n */\nclass Snackbar extends React.Component<Props, State> {\n  /**\n   * Show the Snackbar for a short duration.\n   */\n  static DURATION_SHORT = DURATION_SHORT;\n\n  /**\n   * Show the Snackbar for a medium duration.\n   */\n  static DURATION_MEDIUM = DURATION_MEDIUM;\n\n  /**\n   * Show the Snackbar for a long duration.\n   */\n  static DURATION_LONG = DURATION_LONG;\n\n  static defaultProps = {\n    duration: DURATION_MEDIUM,\n  };\n\n  state = {\n    opacity: new Animated.Value(0.0),\n    hidden: !this.props.visible,\n  };\n\n  componentDidMount() {\n    if (this.props.visible) {\n      this.show();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.visible !== this.props.visible) {\n      this.toggle();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n    }\n  }\n\n  private toggle = () => {\n    if (this.props.visible) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  };\n\n  private show = () => {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n    }\n    this.setState({\n      hidden: false,\n    });\n    const { scale } = this.props.theme.animation;\n    Animated.timing(this.state.opacity, {\n      toValue: 1,\n      duration: 200 * scale,\n      useNativeDriver: true,\n    }).start(({ finished }) => {\n      if (finished) {\n        const { duration } = this.props;\n        const isInfinity =\n          duration === Number.POSITIVE_INFINITY ||\n          duration === Number.NEGATIVE_INFINITY;\n\n        if (finished && !isInfinity) {\n          this.hideTimeout = setTimeout(this.props.onDismiss, duration);\n        }\n      }\n    });\n  };\n\n  private hide = () => {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n    }\n    const { scale } = this.props.theme.animation;\n    Animated.timing(this.state.opacity, {\n      toValue: 0,\n      duration: 100 * scale,\n      useNativeDriver: true,\n    }).start(({ finished }) => {\n      if (finished) {\n        this.setState({ hidden: true });\n      }\n    });\n  };\n\n  private hideTimeout?: number;\n\n  render() {\n    const { children, visible, action, onDismiss, theme, style } = this.props;\n    const { colors, roundness } = theme;\n\n    if (this.state.hidden) {\n      return null;\n    }\n\n    return (\n      <SafeAreaView pointerEvents=\"box-none\" style={styles.wrapper}>\n        <Surface\n          pointerEvents=\"box-none\"\n          accessibilityLiveRegion=\"polite\"\n          style={\n            [\n              styles.container,\n              {\n                borderRadius: roundness,\n                opacity: this.state.opacity,\n                transform: [\n                  {\n                    scale: visible\n                      ? this.state.opacity.interpolate({\n                          inputRange: [0, 1],\n                          outputRange: [0.9, 1],\n                        })\n                      : 1,\n                  },\n                ],\n              },\n              { backgroundColor: colors.onSurface },\n              style,\n            ] as StyleProp<ViewStyle>\n          }\n        >\n          <Text\n            style={[\n              styles.content,\n              { marginRight: action ? 0 : 16, color: colors.surface },\n            ]}\n          >\n            {children}\n          </Text>\n          {action ? (\n            <Button\n              accessibilityLabel={action.accessibilityLabel}\n              onPress={() => {\n                action.onPress();\n                onDismiss();\n              }}\n              style={styles.button}\n              color={colors.accent}\n              compact\n              mode=\"text\"\n            >\n              {action.label}\n            </Button>\n          ) : null}\n        </Surface>\n      </SafeAreaView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    position: 'absolute',\n    bottom: 0,\n    width: '100%',\n  },\n  container: {\n    elevation: 6,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    margin: 8,\n    borderRadius: 4,\n  },\n  content: {\n    marginLeft: 16,\n    marginVertical: 14,\n    flexWrap: 'wrap',\n    flex: 1,\n  },\n  button: {\n    marginHorizontal: 8,\n    marginVertical: 6,\n  },\n});\n\nexport default withTheme(Snackbar);\n"]},"metadata":{},"sourceType":"module"}